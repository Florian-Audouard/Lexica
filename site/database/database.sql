CREATE EXTENSION IF NOT EXISTS fuzzystrmatch;
CREATE EXTENSION IF NOT EXISTS pg_trgm;

DROP TABLE IF EXISTS data;
DROP TABLE IF EXISTS langue;
DROP TABLE IF EXISTS historyModif;

CREATE TABLE langue(
    id int GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    nom text
);

CREATE TABLE data(
    id serial PRIMARY KEY,
    langue int REFERENCES langue(id),
    sens int,
    date_creation TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
    mots text,
    numeroPage int
);


CREATE OR REPLACE FUNCTION id_langue(l langue.nom%TYPE)
    RETURNS SETOF langue.id%TYPE AS
    $$
        SELECT id FROM langue WHERE nom = l
    $$
    LANGUAGE SQL
    STABLE;